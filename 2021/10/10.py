# ---------------------------------------------------------------------------------------------------------------------
# AoC 2021
# ---------------------------------------------------------------------------------------------------------------------
# 10.py
# ---------------------------------------------------------------------------------------------------------------------


# ---------------------------------------------------------------------------------------------------------------------
# Settings
# ---------------------------------------------------------------------------------------------------------------------
SYNTAX_SCORE_DICT = {')': 3,
                     ']': 57,
                     '}': 1197,
                     '>': 25137}

OPENING_SET = {'(', '[', '{', '<'}
CLOSING_SET = {')', ']', '}', '>'}

CLOSING_TO_OPENING_DICT = {')': '(',
                           ']': '[',
                           '}': '{',
                           '>': '<'}


# ---------------------------------------------------------------------------------------------------------------------
def check_syntax(fl: str) -> int:

    if fl[0] in CLOSING_SET:
        return SYNTAX_SCORE_DICT[fl[0]]

    s = fl[0]
    for c in fl[1:]:

        if c in OPENING_SET:
            s += c
            continue

        if s[-1] != CLOSING_TO_OPENING_DICT[c]:
            return SYNTAX_SCORE_DICT[c]

        s = s[:-1]

    return 0
# ---------------------------------------------------------------------------------------------------------------------


# ---------------------------------------------------------------------------------------------------------------------
def main() -> None:

    with open('input.txt') as f:
        f_lines = [t.strip() for t in f.readlines()]

    total_score = 0
    for fl in f_lines:
        score = check_syntax(fl)
        total_score += score

    print("part 1: %d" % total_score)
# ---------------------------------------------------------------------------------------------------------------------


# ---------------------------------------------------------------------------------------------------------------------
if __name__ == '__main__':
    main()
# ---------------------------------------------------------------------------------------------------------------------


# ---------------------------------------------------------------------------------------------------------------------
# End of File
# ---------------------------------------------------------------------------------------------------------------------
