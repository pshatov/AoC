# ---------------------------------------------------------------------------------------------------------------------
# 25.py
# ---------------------------------------------------------------------------------------------------------------------
# AoC '22
# ---------------------------------------------------------------------------------------------------------------------


# ---------------------------------------------------------------------------------------------------------------------
# Globals
# ---------------------------------------------------------------------------------------------------------------------
DigitLUT = {'2':  2,
            '1':  1,
            '0':  0,
            '-': -1,
            '=': -2}

DigitReverseLUT = {-2: '=',
                   -1: '-',
                    0: '0',
                    1: '1',
                    2: '2'}


# ---------------------------------------------------------------------------------------------------------------------
def snafu2dec(value: str) -> int:
    result, power = 0, 1
    for next_digit in reversed(value):
        result += power * DigitLUT[next_digit]
        power *= 5
    return result
# ---------------------------------------------------------------------------------------------------------------------


# ---------------------------------------------------------------------------------------------------------------------
def dec2snafu(value: int) -> str:
    digits = []
    while value > 0:
        digits.insert(0, value % 5)
        value = (value - digits[0]) // 5

    for i in range(len(digits) - 1, -1, -1):
        if digits[i] > 2:
            digits[i] -= 5
            if i == 0:
                digits.insert(0, 1)
            else:
                digits[i - 1] += 1

    return ''.join([DigitReverseLUT[d] for d in digits])
# ---------------------------------------------------------------------------------------------------------------------


# ---------------------------------------------------------------------------------------------------------------------
def main() -> None:

    with open('input.txt') as file:
        all_lines = [line for line in [line.strip() for line in file] if line]

    result = 0
    for next_line in all_lines:
        result += snafu2dec(next_line)
    print("part 1: %s" % dec2snafu(result))
# ---------------------------------------------------------------------------------------------------------------------


# ---------------------------------------------------------------------------------------------------------------------
if __name__ == '__main__':
    main()
# ---------------------------------------------------------------------------------------------------------------------


# ---------------------------------------------------------------------------------------------------------------------
# End of File
# ---------------------------------------------------------------------------------------------------------------------
